function check_if_mobile_width(){$(window).width()<979?($.root_.addClass("mobile-view-activated"),$.root_.removeClass("minified")):$.root_.hasClass("mobile-view-activated")&&$.root_.removeClass("mobile-view-activated")}function runAllForms(){$.fn.slider&&$(".slider").slider(),$.fn.select2&&$(".select2").each(function(){var e=$(this),t=e.attr("data-select-width")||"100%";e.select2({allowClear:!0,width:t})}),$.fn.mask&&$("[data-mask]").each(function(){var e=$(this),t=e.attr("data-mask")||"error...",a=e.attr("data-mask-placeholder")||"X";e.mask(t,{placeholder:a})}),$.fn.autocomplete&&$("[data-autocomplete]").each(function(){var e=$(this),t=e.data("autocomplete")||["The","Quick","Brown","Fox","Jumps","Over","Three","Lazy","Dogs"];e.autocomplete({source:t})}),$.fn.datepicker&&$(".datepicker").each(function(){var e=$(this),t=e.attr("data-dateformat")||"dd.mm.yy";e.datepicker({dateFormat:t,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>'})})}function runAllCharts(){if($.fn.sparkline){var e,t,a,i,o,r,l,n,s,d,p,h,c,f,u,g,m,k,b,v,C,w,y,x,A,_,S,j,M,R,B,T,L,W,E,z,D,N,F,H,I,O,V,X,P,Q,U,J,K,Y,G,q,Z,ee,te,ae,ie,oe,re,le,ne,se,de,pe,he,ce,fe,ue,ge,me,ke,$e;$(".sparkline").each(function(){var be=$(this),ve=be.data("sparkline-type")||"bar";if("bar"==ve&&(e=be.data("sparkline-bar-color")||be.css("color")||"#0000f0",t=be.data("sparkline-height")||"26px",a=be.data("sparkline-barwidth")||5,i=be.data("sparkline-barspacing")||2,o=be.data("sparkline-negbar-color")||"#A90329",r=be.data("sparkline-barstacked-color")||["#A90329","#0099c6","#98AA56","#da532c","#4490B1","#6E9461","#990099","#B4CAD3"],be.sparkline("html",{barColor:e,type:ve,height:t,barWidth:a,barSpacing:i,stackedBarColor:r,negBarColor:o,zeroAxis:"false"})),"line"==ve&&(t=be.data("sparkline-height")||"20px",ee=be.data("sparkline-width")||"90px",l=be.data("sparkline-line-color")||be.css("color")||"#0000f0",n=be.data("sparkline-line-width")||1,s=be.data("fill-color")||"#c0d0f0",d=be.data("sparkline-spot-color")||"#f08000",p=be.data("sparkline-minspot-color")||"#ed1c24",h=be.data("sparkline-maxspot-color")||"#f08000",c=be.data("sparkline-highlightspot-color")||"#50f050",f=be.data("sparkline-highlightline-color")||"f02020",u=be.data("sparkline-spotradius")||1.5,thisChartMinYRange=be.data("sparkline-min-y")||"undefined",thisChartMaxYRange=be.data("sparkline-max-y")||"undefined",thisChartMinXRange=be.data("sparkline-min-x")||"undefined",thisChartMaxXRange=be.data("sparkline-max-x")||"undefined",thisMinNormValue=be.data("min-val")||"undefined",thisMaxNormValue=be.data("max-val")||"undefined",thisNormColor=be.data("norm-color")||"#c0c0c0",thisDrawNormalOnTop=be.data("draw-normal")||!1,be.sparkline("html",{type:"line",width:ee,height:t,lineWidth:n,lineColor:l,fillColor:s,spotColor:d,minSpotColor:p,maxSpotColor:h,highlightSpotColor:c,highlightLineColor:f,spotRadius:u,chartRangeMin:thisChartMinYRange,chartRangeMax:thisChartMaxYRange,chartRangeMinX:thisChartMinXRange,chartRangeMaxX:thisChartMaxXRange,normalRangeMin:thisMinNormValue,normalRangeMax:thisMaxNormValue,normalRangeColor:thisNormColor,drawNormalOnTop:thisDrawNormalOnTop})),"pie"==ve&&(g=be.data("sparkline-piecolor")||["#B4CAD3","#4490B1","#98AA56","#da532c","#6E9461","#0099c6","#990099","#717D8A"],m=be.data("sparkline-piesize")||90,k=be.data("border-color")||"#45494C",b=be.data("sparkline-offset")||0,be.sparkline("html",{type:"pie",width:m,height:m,tooltipFormat:'<span style="color: {{color}}">&#9679;</span> ({{percent.1}}%)',sliceColors:g,borderWidth:1,offset:b,borderColor:k})),"box"==ve&&(v=be.data("sparkline-width")||"auto",C=be.data("sparkline-height")||"auto",w=be.data("sparkline-boxraw")||!1,y=be.data("sparkline-targetval")||"undefined",x=be.data("sparkline-min")||"undefined",A=be.data("sparkline-max")||"undefined",_=be.data("sparkline-showoutlier")||!0,S=be.data("sparkline-outlier-iqr")||1.5,j=be.data("sparkline-spotradius")||1.5,M=be.css("color")||"#000000",R=be.data("fill-color")||"#c0d0f0",B=be.data("sparkline-whis-color")||"#000000",T=be.data("sparkline-outline-color")||"#303030",L=be.data("sparkline-outlinefill-color")||"#f0f0f0",W=be.data("sparkline-outlinemedian-color")||"#f00000",E=be.data("sparkline-outlinetarget-color")||"#40a020",be.sparkline("html",{type:"box",width:v,height:C,raw:w,target:y,minValue:x,maxValue:A,showOutliers:_,outlierIQR:S,spotRadius:j,boxLineColor:M,boxFillColor:R,whiskerColor:B,outlierLineColor:T,outlierFillColor:L,medianColor:W,targetColor:E})),"bullet"==ve){var Ce=be.data("sparkline-height")||"auto";z=be.data("sparkline-width")||2,D=be.data("sparkline-bullet-color")||"#ed1c24",N=be.data("sparkline-performance-color")||"#3030f0",F=be.data("sparkline-bulletrange-color")||["#d3dafe","#a8b6ff","#7f94ff"],be.sparkline("html",{type:"bullet",height:Ce,targetWidth:z,targetColor:D,performanceColor:N,rangeColors:F})}"discrete"==ve&&(H=be.data("sparkline-height")||26,I=be.data("sparkline-width")||50,O=be.css("color"),V=be.data("sparkline-line-height")||5,X=be.data("sparkline-threshold")||"undefined",P=be.data("sparkline-threshold-color")||"#ed1c24",be.sparkline("html",{type:"discrete",width:I,height:H,lineColor:O,lineHeight:V,thresholdValue:X,thresholdColor:P})),"tristate"==ve&&(Q=be.data("sparkline-height")||26,U=be.data("sparkline-posbar-color")||"#60f060",J=be.data("sparkline-negbar-color")||"#f04040",K=be.data("sparkline-zerobar-color")||"#909090",Y=be.data("sparkline-barwidth")||5,G=be.data("sparkline-barspacing")||2,q=be.data("sparkline-zeroaxis")||!1,be.sparkline("html",{type:"tristate",height:Q,posBarColor:Z,negBarColor:J,zeroBarColor:K,barWidth:Y,barSpacing:G,zeroAxis:q})),"compositebar"==ve&&(t=be.data("sparkline-height")||"20px",ee=be.data("sparkline-width")||"100%",a=be.data("sparkline-barwidth")||3,n=be.data("sparkline-line-width")||1,l=be.data("sparkline-color-top")||"#ed1c24",Z=be.data("sparkline-color-bottom")||"#333333",be.sparkline(be.data("sparkline-bar-val"),{type:"bar",width:ee,height:t,barColor:Z,barWidth:a}),be.sparkline(be.data("sparkline-line-val"),{width:ee,height:t,lineColor:l,lineWidth:n,composite:!0,fillColor:!1})),"compositeline"==ve&&(t=be.data("sparkline-height")||"20px",ee=be.data("sparkline-width")||"90px",te=be.data("sparkline-bar-val"),ae=be.data("sparkline-bar-val-spots-top")||null,ie=be.data("sparkline-bar-val-spots-bottom")||null,oe=be.data("sparkline-line-width-top")||1,re=be.data("sparkline-line-width-bottom")||1,le=be.data("sparkline-color-top")||"#333333",ne=be.data("sparkline-color-bottom")||"#ed1c24",se=be.data("sparkline-spotradius-top")||1.5,de=be.data("sparkline-spotradius-bottom")||se,d=be.data("sparkline-spot-color")||"#f08000",pe=be.data("sparkline-minspot-color-top")||"#ed1c24",he=be.data("sparkline-maxspot-color-top")||"#f08000",ce=be.data("sparkline-minspot-color-bottom")||pe,fe=be.data("sparkline-maxspot-color-bottom")||he,ue=be.data("sparkline-highlightspot-color-top")||"#50f050",ge=be.data("sparkline-highlightline-color-top")||"#f02020",me=be.data("sparkline-highlightspot-color-bottom")||ue,thisHighlightLineColor2=be.data("sparkline-highlightline-color-bottom")||ge,ke=be.data("sparkline-fillcolor-top")||"transparent",$e=be.data("sparkline-fillcolor-bottom")||"transparent",be.sparkline(te,{type:"line",spotRadius:se,spotColor:d,minSpotColor:pe,maxSpotColor:he,highlightSpotColor:ue,highlightLineColor:ge,valueSpots:ae,lineWidth:oe,width:ee,height:t,lineColor:le,fillColor:ke}),be.sparkline(be.data("sparkline-line-val"),{type:"line",spotRadius:de,spotColor:d,minSpotColor:ce,maxSpotColor:fe,highlightSpotColor:me,highlightLineColor:thisHighlightLineColor2,valueSpots:ie,lineWidth:re,width:ee,height:t,lineColor:ne,composite:!0,fillColor:$e}))})}$.fn.easyPieChart&&$(".easy-pie-chart").each(function(){var e=$(this),t=e.css("color")||e.data("pie-color"),a=e.data("pie-track-color")||"#eeeeee",i=parseInt(e.data("pie-size"))||25;e.easyPieChart({barColor:t,trackColor:a,scaleColor:!1,lineCap:"butt",lineWidth:parseInt(i/8.5),animate:1500,rotate:-90,size:i,onStep:function(e){this.$el.find("span").text(~~e)}})})}function setup_widgets_desktop(){$.fn.jarvisWidgets&&$.enableJarvisWidgets&&$("#widget-grid").jarvisWidgets({grid:"article",widgets:".jarviswidget",localStorage:!0,deleteSettingsKey:"#deletesettingskey-options",settingsKeyLabel:"Reset settings?",deletePositionKey:"#deletepositionkey-options",positionKeyLabel:"Reset position?",sortable:!0,buttonsHidden:!1,toggleButton:!0,toggleClass:"fa fa-minus | fa fa-plus",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteClass:"fa fa-times",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"fa fa-cog | fa fa-save",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fa fa-expand | fa fa-compress",fullscreenDiff:3,onFullscreen:function(){},customButton:!1,customClass:"folder-10 | next-10",customStart:function(){alert("Hello you, this is a custom button...")},customEnd:function(){alert("bye, till next time...")},buttonOrder:"%refresh% %custom% %edit% %toggle% %fullscreen% %delete%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"fa fa-refresh",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:$.navAsAjax})}function setup_widgets_mobile(){$.enableMobileWidgets&&$.enableJarvisWidgets&&setup_widgets_desktop()}function loadScript(e,t){if(jsArray[e])t&&t();else{jsArray[e]=!0;var a=document.getElementsByTagName("body")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=t,a.appendChild(i)}}function loadURL(e,t){$.ajax({type:"GET",url:e,dataType:"html",cache:!0,beforeSend:function(){if($.navAsAjax&&$(".google_maps")[0]&&t[0]==$("#content")[0]){var e=$(".google_maps"),a=0;e.each(function(){a++;var t=document.getElementById(this.id);a==e.length+1||t&&t.parentNode.removeChild(t)})}if($.navAsAjax&&$(".dataTables_wrapper")[0]&&t[0]==$("#content")[0]){var i=$.fn.dataTable.fnTables(!0);$(i).each(function(){$(this).dataTable().fnDestroy()})}if($.navAsAjax&&$.intervalArr.length>0&&t[0]==$("#content")[0])for(;$.intervalArr.length>0;)clearInterval($.intervalArr.pop());t.html('<h1 class="ajax-loading-animation"><i class="fa fa-cog fa-spin"></i> Loading...</h1>'),t[0]==$("#content")[0]&&(drawBreadCrumb(),$("html").animate({scrollTop:0},"fast"))},success:function(e){t.css({opacity:"0.0"}).html(e).delay(50).animate({opacity:"1.0"},300)},error:function(e,a,i){t.html('<h4 class="ajax-loading-error"><i class="fa fa-warning txt-color-orangeDark"></i> Error 404! Page not found.</h4>')},async:!0})}function pageSetUp(){"desktop"===$.device?($("[rel=tooltip]").tooltip(),$("[rel=popover]").popover(),$("[rel=popover-hover]").popover({trigger:"hover"}),setup_widgets_desktop(),runAllCharts(),runAllForms()):($("[rel=popover]").popover(),$("[rel=popover-hover]").popover({trigger:"hover"}),runAllCharts(),setup_widgets_mobile(),runAllForms())}$.throttle_delay=350,$.menu_speed=235,$.navAsAjax=!0,$.enableJarvisWidgets=!0,$.enableMobileWidgets=!1,$.fastClick=!1,$.calc_navbar_height=function(){var e=null;return $("#header").length&&(e=$("#header").height()),null===e&&(e=$('<div id="header"></div>').height()),null===e?49:e},$.navbar_height=$.calc_navbar_height(),$.root_=$("body"),$.left_panel=$("#left-panel"),$.shortcut_dropdown=$("#shortcut"),$.bread_crumb=$("#ribbon ol.breadcrumb"),$.intervalArr=new Array;var $topmenu=!1;$.device=null;var ismobile=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase());ismobile?($.root_.addClass("mobile-detected"),$.device="mobile",$.fastClick&&($.root_.addClass("needsclick"),FastClick.attach(document.body))):($.root_.addClass("desktop-detected"),$.device="desktop"),($("body").hasClass("menu-on-top")||"top"==localStorage.getItem("sm-setmenu"))&&($topmenu=!0,$("body").addClass("menu-on-top")),jQuery(document).ready(function(){$("[rel=tooltip]").length&&$("[rel=tooltip]").tooltip(),$(document).mouseup(function(e){$(".ajax-dropdown").is(e.target)||0!==$(".ajax-dropdown").has(e.target).length||($(".ajax-dropdown").fadeOut(150),$(".ajax-dropdown").prev().removeClass("active"))}),$("button[data-btn-loading]").on("click",function(){var e=$(this);e.button("loading"),setTimeout(function(){e.button("reset")},3e3)})}),function(e,t,a){function i(){o=t[n](function(){r.each(function(){var t,a,i=e(this),o=e.data(this,d);try{t=i.width()}catch(r){t=i.width}try{a=i.height()}catch(r){a=i.height}t===o.w&&a===o.h||i.trigger(s,[o.w=t,o.h=a])}),i()},l[p])}var o,r=e([]),l=e.resize=e.extend(e.resize,{}),n="setTimeout",s="resize",d=s+"-special-event",p="delay",h="throttleWindow";l[p]=e.throttle_delay,l[h]=!0,e.event.special[s]={setup:function(){if(!l[h]&&this[n])return!1;var t=e(this);r=r.add(t);try{e.data(this,d,{w:t.width(),h:t.height()})}catch(a){e.data(this,d,{w:t.width,h:t.height})}1===r.length&&i()},teardown:function(){if(!l[h]&&this[n])return!1;var t=e(this);r=r.not(t),t.removeData(d),r.length||clearTimeout(o)},add:function(t){function i(t,i,r){var l=e(this),n=e.data(this,d);n.w=i!==a?i:l.width(),n.h=r!==a?r:l.height(),o.apply(this,arguments)}if(!l[h]&&this[n])return!1;var o;return e.isFunction(t)?(o=t,i):(o=t.handler,void(t.handler=i))}}}(jQuery,this),$("#main").resize(function(){check_if_mobile_width()});var ie=function(){for(var e,t=3,a=document.createElement("div"),i=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:e}();if($.fn.extend({jarvismenu:function(e){var t={accordion:"true",speed:200,closedSign:"[+]",openedSign:"[-]"},a=$.extend(t,e),i=$(this);i.find("li").each(function(){0!==$(this).find("ul").size()&&($(this).find("a:first").append("<b class='collapse-sign'>"+a.closedSign+"</b>"),"#"==$(this).find("a:first").attr("href")&&$(this).find("a:first").click(function(){return!1}))}),i.find("li.active").each(function(){$(this).parents("ul").slideDown(a.speed),$(this).parents("ul").parent("li").find("b:first").html(a.openedSign),$(this).parents("ul").parent("li").addClass("open")}),i.find("li a").click(function(){0!==$(this).parent().find("ul").size()&&(a.accordion&&($(this).parent().find("ul").is(":visible")||(parents=$(this).parent().parents("ul"),visible=i.find("ul:visible"),visible.each(function(e){var t=!0;parents.each(function(a){return parents[a]==visible[e]?(t=!1,!1):void 0}),t&&$(this).parent().find("ul")!=visible[e]&&$(visible[e]).slideUp(a.speed,function(){$(this).parent("li").find("b:first").html(a.closedSign),$(this).parent("li").removeClass("open")})}))),$(this).parent().find("ul:first").is(":visible")&&!$(this).parent().find("ul:first").hasClass("active")?$(this).parent().find("ul:first").slideUp(a.speed,function(){$(this).parent("li").removeClass("open"),$(this).parent("li").find("b:first").delay(a.speed).html(a.closedSign)}):$(this).parent().find("ul:first").slideDown(a.speed,function(){$(this).parent("li").addClass("open"),$(this).parent("li").find("b:first").delay(a.speed).html(a.openedSign)}))})}}),jQuery.fn.doesExist=function(){return jQuery(this).length>0},$.navAsAjax||$(".google_maps")){var gMapsLoaded=!1;window.gMapsCallback=function(){gMapsLoaded=!0,$(window).trigger("gMapsLoaded")},window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback"),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)}}var jsArray={};$("body").on("click",function(e){$('[rel="popover"]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})});
Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t};
var smartApp=angular.module("smartApp",["ngRoute","ngCookies","ui.bootstrap","plunker","app.main","app.controllers","app.navigation","app.localize","app.activity","app.smartui"]);smartApp.config(["$routeProvider","$provide",function(e,r){e.when("/",{redirectTo:"/overview"}).when("/overview",{templateUrl:function(){return"media/views/overview.html"},controller:"overviewCtrl"}).when("/accSearch",{templateUrl:function(){return"media/views/accSearch.html"},controller:"accSearchCtrl"}).when("/accManage",{templateUrl:function(){return"media/views/accManage.html"},controller:"accManageCtrl"}).when("/carFix",{templateUrl:function(){return"media/views/carFix.html"},controller:"carFixCtrl"}).when("/carInfo",{templateUrl:function(){return"media/views/carInfo.html"},controller:"carInfoCtrl"}).when("/finance",{templateUrl:function(){return"media/views/finance.html"},controller:"financeCtrl"}).when("/accUsage",{templateUrl:function(){return"media/views/accUsage.html"},controller:"accUsageCtrl"}).when("/port",{templateUrl:function(){return"media/views/port.html"},controller:"portCtrl"}).when("/dashboard",{templateUrl:function(){return"media/views/dashboard.html"},controller:"dashboardCtrl"}).when("/userManage",{templateUrl:function(){return"media/views/userManage.html"},controller:"userManageCtrl"}).otherwise({redirectTo:"/overview"}),r.decorator("$log",function(e){function r(){r.info.apply(r,arguments)}return angular.extend(r,e),r})}]);
angular.module("app.controllers",[]).factory("settings",["$rootScope",function(e){var n={languages:[{language:"English",translation:"English",langCode:"en",flagCode:"us"},{language:"Espanish",translation:"Espanish",langCode:"es",flagCode:"es"},{language:"German",translation:"Deutsch",langCode:"de",flagCode:"de"},{language:"Korean",translation:"한국의",langCode:"ko",flagCode:"kr"},{language:"French",translation:"français",langCode:"fr",flagCode:"fr"},{language:"Portuguese",translation:"português",langCode:"pt",flagCode:"br"},{language:"Russian",translation:"русский",langCode:"ru",flagCode:"ru"},{language:"Chinese",translation:"中國的",langCode:"zh",flagCode:"cn"}]};return n}]).filter("fillArray",["$log",function(e){return function(e,n){if(!Array.isArray(e)||e.length>n)return e;for(var t=e.length,a=n-t,o=[],s=0;a>s;s++)o.push({});return e.concat(o)}}]).controller("PageViewController",["$scope","$route","$animate",function(e,n,t){}]).controller("SmartAppController",["$scope","$rootScope","$cookies","$window","$location","$modal",function(e,n,t,a,o,s){switch(n.systemFlag=!1,n.financeFlag=!1,RightList=["overview","acc","accSearch","accManage","car","carFix","carInfo","data","finance","accUsage","port","report","dashboard","userManage"],rootRightList=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0],adminRightList=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],managerRightList=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1],guestRightList=[!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],e.setRight=function(e){right={},n.Right={};for(var t=0;t<RightList.length;t++)module=RightList[t],flag=e[t],right[module]=flag;n.Right=right},n.userNameGlobal=t.userName,n.lastLoginGlobal=String(t.lastLogin),Number(t.role)){case 0:n.systemFlag=!0,n.financeFlag=!0,roleRightList=rootRightList,e.url="/userManage";break;case 1:roleRightList=adminRightList,n.financeFlag=!0,e.url="/overview";break;case 2:roleRightList=managerRightList,e.url="/carFix";break;default:roleRightList=guestRightList,e.url="/accSearch"}e.setRight(roleRightList),e.changeStation=function(){e.items={stationName:t.stationName,hotline:t.hotline};var n=s.open({size:"sm",backdrop:"static",templateUrl:"changeStation.html",controller:"changeStationCtrl",resolve:{items:function(){return e.items}}});n.result.then(function(e){},function(){console.log("cancel change passwd")})},e.changePasswd=function(){e.items={financeItem:111};var n=s.open({size:"sm",backdrop:"static",templateUrl:"changePasswd.html",controller:"changePasswdCtrl",resolve:{items:function(){return e.items}}});n.result.then(function(e){},function(){console.log("cancel change passwd")})},n.$on("$locationChangeStart",function(n){return o.path()||o.path(e.url),t.userName&&localStorage.loginFlag?void 0:(t.userName="",t.code="",a.location.href="/media/login.html",null)})}]).controller("changePasswdCtrl",["$scope","$modalInstance","$http","$timeout","$window",function(e,n,t,a,o){e.confirmChange=function(s,i){t.post("/dfapi?api=008",{oldPasswd:s,newPasswd:i}).success(function(t){"success"===t.Result?(e.Message="操作成功",a(function(){n.close(),o.location.href="/media/login.html"},500)):e.Message=t.Message}).error(function(n){e.Message="服务器无响应！"})},e.submitForm=function(n,t,a,o){return e.Message="",e.dirtyFlag=!0,n?t===a?(e.Message="新、旧密码不能相同！",null):o!==a?(e.Message="确认密码不一致！",null):void e.confirmChange(t,a):(e.Message="请确认格式正确！",null)},e.cancelForm=function(){n.dismiss("cancel")}}]).controller("changeStationCtrl",["$scope","$modalInstance","$http","$timeout","items",function(e,n,t,a,o){e.station={},e.station=o,e.confirmSubmit=function(o,s){t.post("/dfapi?api=009",{stationName:o,hotline:s}).success(function(t){"success"===t.Result?(e.Message="操作成功",a(function(){n.close()},500)):e.Message=t.Message}).error(function(n){e.Message="服务器无响应！"})},e.submitForm=function(n,t,a){return e.Message="",e.dirtyFlag=!0,n?void e.confirmSubmit(t,a):(e.Message="请确认格式正确！",null)},e.cancelForm=function(){n.dismiss("cancel")}}]).controller("LangController",["$scope","settings","localize",function(e,n,t){e.languages=n.languages,e.currentLang=n.currentLang,e.setLang=function(a){n.currentLang=a,e.currentLang=a,t.setLang(a)},e.setLang(e.currentLang)}]);
angular.module("app.controllers").directive("intPostValidator",["$log",function(r){return{restrict:"A",require:"ngModel",link:function(r,t,e,n){n.IllegalCharacter=function(r){return/^(0|[1-9]\d*)$/.test(r)}}}}]);
angular.module("app.main",[]).directive("body",function(){return{restrict:"E",link:function(e,t,a){t.on("click",'a[href="#"], [data-toggle]',function(e){e.preventDefault()})}}}).factory("ribbon",["$rootScope",function(e){var t={currentBreadcrumb:[],updateBreadcrumb:function(a){a.push("主页");var n=a.reverse();t.currentBreadcrumb=n,e.$broadcast("navItemSelected",n)}};return t}]).directive("action",["$cookies",function(e){return{restrict:"A",link:function(e,t,a){var n={userLogout:function(e){function t(){localStorage.clear(),window.location=e.attr("href")}$.SmartMessageBox({title:"<i class='fa fa-sign-out txt-color-orangeDark'></i> 退出 <span class='txt-color-orangeDark'><strong>"+$("#show-shortcut").text()+"</strong></span> ?",content:e.data("logout-msg")||"You can improve your security further after logging out by closing this opened browser",buttons:"[否][是]"},function(e){"是"==e&&($.root_.addClass("animated fadeOutUp"),setTimeout(t,1e3))})},resetWidgets:function(e){$.widresetMSG=e.data("reset-msg"),$.SmartMessageBox({title:"<i class='fa fa-refresh' style='color:green'></i> 刷新",content:$.widresetMSG||"Would you like to RESET all your saved widgets and clear LocalStorage?",buttons:"[否][是]"},function(e){"是"==e&&localStorage&&(localStorage.clear(),localStorage.loginFlag=!0,location.reload())})},launchFullscreen:function(e){$.root_.hasClass("full-screen")?($.root_.removeClass("full-screen"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()):($.root_.addClass("full-screen"),e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())},minifyMenu:function(e){$.root_.hasClass("menu-on-top")||($.root_.toggleClass("minified"),$.root_.removeClass("hidden-menu"),$("html").removeClass("hidden-menu-mobile-lock"),e.effect("highlight",{},500))},toggleMenu:function(){$.root_.hasClass("menu-on-top")?$.root_.hasClass("menu-on-top")&&$.root_.hasClass("mobile-view-activated")&&($("html").toggleClass("hidden-menu-mobile-lock"),$.root_.toggleClass("hidden-menu"),$.root_.removeClass("minified")):($("html").toggleClass("hidden-menu-mobile-lock"),$.root_.toggleClass("hidden-menu"),$.root_.removeClass("minified"))},toggleShortcut:function(){function e(){$.shortcut_dropdown.animate({height:"hide"},300,"easeOutCirc"),$.root_.removeClass("shortcut-on")}function t(){$.shortcut_dropdown.animate({height:"show"},200,"easeOutCirc"),$.root_.addClass("shortcut-on")}$.shortcut_dropdown.is(":visible")?e():t(),$.shortcut_dropdown.find("a").click(function(t){t.preventDefault(),window.location=$(this).attr("href"),setTimeout(e,300)}),$(document).mouseup(function(t){$.shortcut_dropdown.is(t.target)||0!==$.shortcut_dropdown.has(t.target).length||e()})}},i={userLogout:function(e){n.userLogout(t)},resetWidgets:function(e){n.resetWidgets(t)},launchFullscreen:function(e){n.launchFullscreen(document.documentElement)},minifyMenu:function(e){n.minifyMenu(t)},toggleMenu:function(e){n.toggleMenu()},toggleShortcut:function(e){n.toggleShortcut()}};if(angular.isDefined(a.action)&&""!==a.action){var o=i[a.action];"function"==typeof o&&t.on("click",function(e){o(e),e.preventDefault()})}}}}]).directive("header",function(){return{restrict:"EA",link:function(e,t,a){angular.element("#search-mobile").click(function(){$.root_.addClass("search-mobile")}),angular.element("#cancel-search-js").click(function(){$.root_.removeClass("search-mobile")})}}}).directive("ribbon1",function(){return{restrict:"A",link:function(e,t,a){t.append('<div class="demo"><span id="demo-setting"><i class="fa fa-cog txt-color-blueDark"></i></span> <form><legend class="no-padding margin-bottom-10">Layout Options</legend><section><label><input name="subscription" id="smart-fixed-header" type="checkbox" class="checkbox style-0"><span>Fixed Header</span></label><label><input type="checkbox" name="terms" id="smart-fixed-navigation" class="checkbox style-0"><span>Fixed Navigation</span></label><label><input type="checkbox" name="terms" id="smart-fixed-ribbon" class="checkbox style-0"><span>Fixed Ribbon</span></label><label><input type="checkbox" name="terms" id="smart-fixed-footer" class="checkbox style-0"><span>Fixed Footer</span></label><label><input type="checkbox" name="terms" id="smart-fixed-container" class="checkbox style-0"><span>Inside <b>.container</b> <div class="font-xs text-right">(non-responsive)</div></span></label><label style="display:block;"><input type="checkbox" id="smart-topmenu" class="checkbox style-0"><span>Menu on <b>top</b></span></label> <span id="smart-bgimages"></span></section><section><h6 class="margin-top-10 semi-bold margin-bottom-5">Clear Localstorage</h6><a href="javascript:void(0);" class="btn btn-xs btn-block btn-primary" id="reset-smart-widget"><i class="fa fa-refresh"></i> Factory Reset</a></section> <h6 class="margin-top-10 semi-bold margin-bottom-5">SmartAdmin Skins</h6><section id="smart-styles"><a href="javascript:void(0);" id="smart-style-0" data-skinlogo="img/logo.png" class="btn btn-block btn-xs txt-color-white margin-right-5" style="background-color:#4E463F;"><i class="fa fa-check fa-fw" id="skin-checked"></i>Smart Default</a><a href="javascript:void(0);" id="smart-style-1" data-skinlogo="img/logo-white.png" class="btn btn-block btn-xs txt-color-white" style="background:#3A4558;">Dark Elegance</a><a href="javascript:void(0);" id="smart-style-2" data-skinlogo="img/logo-blue.png" class="btn btn-xs btn-block txt-color-darken margin-top-5" style="background:#fff;">Ultra Light</a><a href="javascript:void(0);" id="smart-style-3" data-skinlogo="img/logo-pale.png" class="btn btn-xs btn-block txt-color-white margin-top-5" style="background:#f78c40">Google Skin</a></section></form> </div>');var n="<h6 class='margin-top-10 semi-bold'>Background</h6><img src='img/pattern/graphy-xs.png' data-htmlbg-url='img/pattern/graphy.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/tileable_wood_texture-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/tileable_wood_texture.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/sneaker_mesh_fabric-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/sneaker_mesh_fabric.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/nistri-xs.png' data-htmlbg-url='img/pattern/nistri.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/paper-xs.png' data-htmlbg-url='img/pattern/paper.png' width='22' height='22' class='bordered cursor-pointer'>";$("#smart-bgimages").fadeOut(),$("#demo-setting").click(function(){$("#ribbon .demo").toggleClass("activate")}),$('input[type="checkbox"]#smart-fixed-header').click(function(){$(this).is(":checked")?$.root_.addClass("fixed-header"):($('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!1),$('input[type="checkbox"]#smart-fixed-navigation').prop("checked",!1),$.root_.removeClass("fixed-header"),$.root_.removeClass("fixed-navigation"),$.root_.removeClass("fixed-ribbon"))}),$('input[type="checkbox"]#smart-fixed-navigation').click(function(){$(this).is(":checked")?($('input[type="checkbox"]#smart-fixed-header').prop("checked",!0),$.root_.addClass("fixed-header"),$.root_.addClass("fixed-navigation"),$('input[type="checkbox"]#smart-fixed-container').prop("checked",!1),$.root_.removeClass("container")):($('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!1),$.root_.removeClass("fixed-navigation"),$.root_.removeClass("fixed-ribbon"))}),$('input[type="checkbox"]#smart-fixed-ribbon').click(function(){$(this).is(":checked")?($('input[type="checkbox"]#smart-fixed-header').prop("checked",!0),$('input[type="checkbox"]#smart-fixed-navigation').prop("checked",!0),$('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!0),$.root_.addClass("fixed-header"),$.root_.addClass("fixed-navigation"),$.root_.addClass("fixed-ribbon"),$('input[type="checkbox"]#smart-fixed-container').prop("checked",!1),$.root_.removeClass("container")):$.root_.removeClass("fixed-ribbon")}),$('input[type="checkbox"]#smart-fixed-footer').click(function(){$(this).is(":checked")?$.root_.addClass("fixed-page-footer"):$.root_.removeClass("fixed-page-footer")}),$('input[type="checkbox"]#smart-rtl').click(function(){$(this).is(":checked")?$.root_.addClass("smart-rtl"):$.root_.removeClass("smart-rtl")}),$("#smart-topmenu").on("change",function(e){$(this).prop("checked")?(localStorage.setItem("sm-setmenu","top"),location.reload()):(localStorage.setItem("sm-setmenu","left"),location.reload())}),"top"==localStorage.getItem("sm-setmenu")?$("#smart-topmenu").prop("checked",!0):$("#smart-topmenu").prop("checked",!1),$('input[type="checkbox"]#smart-fixed-container').click(function(){$(this).is(":checked")?($.root_.addClass("container"),$('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!1),$.root_.removeClass("fixed-ribbon"),$('input[type="checkbox"]#smart-fixed-navigation').prop("checked",!1),$.root_.removeClass("fixed-navigation"),n?($("#smart-bgimages").append(n).fadeIn(1e3),$("#smart-bgimages img").bind("click",function(){var e=$(this),t=$("html");bgurl=e.data("htmlbg-url"),t.css("background-image","url("+bgurl+")")}),n=null):$("#smart-bgimages").fadeIn(1e3)):($.root_.removeClass("container"),$("#smart-bgimages").fadeOut())}),$("#reset-smart-widget").bind("click",function(){return $("#refresh").click(),!1}),$("#smart-styles > a").on("click",function(){var e=$(this),t=$("#logo img");$.root_.removeClassPrefix("smart-style").addClass(e.attr("id")),t.attr("src",e.data("skinlogo")),$("#smart-styles > a #skin-checked").remove(),e.prepend("<i class='fa fa-check fa-fw' id='skin-checked'></i>")})}}}).controller("breadcrumbController",["$scope",function(e){e.breadcrumbs=[],e.$on("navItemSelected",function(t,a){e.setBreadcrumb(a)}),e.setBreadcrumb=function(t){e.breadcrumbs=t}}]).directive("breadcrumb",["ribbon","localize","$compile",function(e,t,a){return{restrict:"AE",controller:"breadcrumbController",replace:!0,link:function(n,i,o){n.$watch("breadcrumbs",function(e,t){e!==t&&n.updateDOM()}),n.updateDOM=function(){i.empty(),angular.forEach(n.breadcrumbs,function(e){var o=angular.element('<li data-localize="'+e+'">'+e+"</li>");o.text(t.localizeText(e)),a(o)(n),i.append(o)})},n.setBreadcrumb(e.currentBreadcrumb),n.updateDOM()},template:'<ol class="breadcrumb"></ol>'}}]),angular.module("app.localize",[]).factory("localize",["$http","$rootScope","$window",function(e,t,a){var n={currentLocaleData:{},currentLang:{},setLang:function(a){e({method:"GET",url:n.getLangUrl(a),cache:!1}).success(function(e){n.currentLocaleData=e,n.currentLang=a,t.$broadcast("localizeLanguageChanged")}).error(function(e){console.log("Error updating language!")})},getLangUrl:function(e){return"media/js/langs/"+e.langCode+".js"},localizeText:function(e){return n.currentLocaleData[e]}};return n}]).directive("localize",["localize",function(e){return{restrict:"A",scope:{sourceText:"@localize"},link:function(t,a,n){t.$on("localizeLanguageChanged",function(){var n=e.localizeText(t.sourceText);a.is("input, textarea")?a.attr("placeholder",n):a.text(n)})}}}]),angular.module("app.navigation",[]).directive("navigation",function(){return{restrict:"AE",controller:["$scope",function(e){}],transclude:!0,replace:!0,link:function(e,t,a){$topmenu||t.first().jarvismenu({accordion:!0,speed:$.menu_speed,closedSign:'<em class="fa fa-plus-square-o"></em>',openedSign:'<em class="fa fa-minus-square-o"></em>'}),$.fn.slimScroll&&t.slimScroll({height:"100%"}),e.getElement=function(){return t}},template:'<nav><ul data-ng-transclude=""></ul></nav>'}}).controller("NavGroupController",["$scope",function(e){e.active=!1,e.hasIcon=angular.isDefined(e.icon),e.hasIconCaption=angular.isDefined(e.iconCaption),this.setActive=function(t){e.active=t}}]).directive("navGroup",function(){return{restrict:"AE",controller:"NavGroupController",transclude:!0,replace:!0,scope:{icon:"@",title:"@",iconCaption:"@",active:"=?"},template:'				<li data-ng-class="{active: active}">					<a href="">						<i data-ng-if="hasIcon" class="{{ icon }}"><em data-ng-if="hasIconCaption"> {{ iconCaption }} </em></i>						<span class="menu-item-parent" data-localize="{{ title }}">{{ title }}</span>					</a>					<ul data-ng-transclude=""></ul>				</li>'}}).controller("NavItemController",["$scope","$location",function(e,t){e.isChild=!1,e.active=!1,e.isActive=function(a){return e.active=a===t.path(),e.active},e.hasIcon=angular.isDefined(e.icon),e.hasIconCaption=angular.isDefined(e.iconCaption),e.getItemUrl=function(t){return angular.isDefined(e.href)?e.href:angular.isDefined(t)?"#"+t:""},e.getItemTarget=function(){return angular.isDefined(e.target)?e.target:"_self"}}]).directive("navItem",["ribbon","$window",function(e,t){return{require:["^navigation","^?navGroup"],restrict:"AE",controller:"NavItemController",scope:{title:"@",view:"@",icon:"@",iconCaption:"@",href:"@",target:"@"},link:function(a,n,i,o){var r=(o[0],o[1]);a.$watch("active",function(e,n){e?(angular.isDefined(r)&&r.setActive(!0),t.document.title=a.title,a.setBreadcrumb()):angular.isDefined(r)&&r.setActive(!1)}),a.openParents=a.isActive(a.view),a.isChild=angular.isDefined(r),a.setBreadcrumb=function(){var t=[];t.push(a.title);n.parents("nav li").each(function(){var e=angular.element(this),n=e.find(".menu-item-parent:eq(0)");t.push(n.data("localize").trim()),a.openParents&&n.trigger("click")});a.openParents=!1,e.updateBreadcrumb(t)},n.on("click",'a[href!="#"]',function(){$.root_.hasClass("mobile-view-activated")&&$.root_.removeClass("hidden-menu")})},transclude:!0,replace:!0,template:'				<li data-ng-class="{active: isActive(view)}">					<a href="{{ getItemUrl(view) }}" target="{{ getItemTarget() }}" title="{{ title }}">						<i data-ng-if="hasIcon" class="{{ icon }}"><em data-ng-if="hasIconCaption"> {{ iconCaption }} </em></i>						<span ng-class="{\'menu-item-parent\': !isChild}" data-localize="{{ title }}"> {{ title }} </span>						<span data-ng-transclude=""></span>					</a>				</li>'}}]),angular.module("app.activity",[]).controller("ActivityController",["$scope","$http",function(e,t){var a=this,n=a.items=e.items=[];a.loadItem=function(e,a){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1)}),e.active=!0,angular.isDefined(e.onLoad)&&e.onLoad(e),t.get(e.src).then(function(e){var t=e.data;angular.isDefined(a)&&a(t)})},a.addItem=function(e){n.push(e),angular.isDefined(e.active)?e.active&&a.loadItem(e):e.active=!1},a.refresh=function(t){var a=angular.element(t.currentTarget);a.button("loading"),angular.isDefined(e.onRefresh)?e.onRefresh(e,function(){a.button("reset")}):a.button("reset")}}]).directive("activity",function(){return{restrict:"AE",replace:!0,transclude:!0,controller:"ActivityController",scope:{onRefresh:"=onrefresh"},template:'<span data-ng-transclude=""></span>'}}).directive("activityButton",function(){return{restrict:"AE",require:"^activity",replace:!0,transclude:!0,controller:function(e){},scope:{icon:"@",total:"="},template:'					<span id="activity" class="activity-dropdown">						<i ng-class="icon"></i>						<b class="badge"> {{ total }} </b>					</span>',link:function(e,t,a,n){if(a.$observe("icon",function(t){angular.isDefined(t)||(e.icon="fa fa-user")}),t.on("click",function(e){var t=$(this);t.find(".badge").hasClass("bg-color-red")&&(t.find(".badge").removeClassPrefix("bg-color-"),t.find(".badge").text("0")),t.next(".ajax-dropdown").is(":visible")?(t.next(".ajax-dropdown").fadeOut(150),t.removeClass("active")):(t.next(".ajax-dropdown").fadeIn(150),t.addClass("active"));t.next(".ajax-dropdown").find(".btn-group > .active > input").attr("id");e.preventDefault()}),e.total>0){var i=t.find(".badge");i.addClass("bg-color-red bounceIn animated")}}}}).controller("ActivityContentController",["$scope",function(e){var t=this;e.currentContent="",t.loadContent=function(t){e.currentContent=t}}]).directive("activityContent",["$compile",function(e){return{restrict:"AE",transclude:!0,require:"^activity",replace:!0,scope:{footer:"=?"},controller:"ActivityContentController",template:'				<div class="ajax-dropdown">					<div class="btn-group btn-group-justified" data-toggle="buttons" data-ng-transclude=""></div>					<div class="ajax-notifications custom-scroll">						<div class="alert alert-transparent">							<h4>Click a button to show messages here</h4>							This blank page message helps protect your privacy, or you can show the first message here automatically.						</div>						<i class="fa fa-lock fa-4x fa-border"></i>					</div>					<span> {{ footer }}						<button type="button" data-loading-text="Loading..." data-ng-click="refresh($event)" class="btn btn-xs btn-default pull-right" data-activty-refresh-button="">						<i class="fa fa-refresh"></i>						</button>					</span>				</div>',link:function(t,a,n,i){t.refresh=function(e){i.refresh(e)},t.$watch("currentContent",function(n,i){if(n!==i){var o=a.find(".ajax-notifications").html(n);e(o)(t)}})}}}]).directive("activityItem",function(){return{restrict:"AE",require:["^activity","^activityContent"],scope:{src:"=",onLoad:"=onload",active:"=?"},controller:function(){},transclude:!0,replace:!0,template:'				<label class="btn btn-default" data-ng-click="loadItem()" ng-class="{active: active}">					<input type="radio" name="activity">					<span data-ng-transclude=""></span>				</label>',link:function(e,t,a,n){var i=n[0],o=n[1];e.$watch("active",function(t){t&&i.loadItem(e,function(e){o.loadContent(e)})}),i.addItem(e),e.loadItem=function(){e.active=!0}}}}),angular.module("app.smartui",[]).directive("widgetGrid",function(){return{restrict:"AE",link:function(e,t,a){e.setup_widget_desktop=function(){$.fn.jarvisWidgets&&$.enableJarvisWidgets&&t.jarvisWidgets({grid:"article",widgets:".jarviswidget",localStorage:!0,deleteSettingsKey:"#deletesettingskey-options",settingsKeyLabel:"Reset settings?",deletePositionKey:"#deletepositionkey-options",positionKeyLabel:"Reset position?",sortable:!0,buttonsHidden:!1,toggleButton:!0,toggleClass:"fa fa-minus | fa fa-plus",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteClass:"fa fa-times",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"fa fa-cog | fa fa-save",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fa fa-expand | fa fa-compress",fullscreenDiff:3,onFullscreen:function(){},customButton:!1,customClass:"folder-10 | next-10",customStart:function(){alert("Hello you, this is a custom button...")},customEnd:function(){alert("bye, till next time...")},buttonOrder:"%refresh% %custom% %edit% %toggle% %fullscreen% %delete%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"fa fa-refresh",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:$.navAsAjax})},e.setup_widget_mobile=function(){$.enableMobileWidgets&&$.enableJarvisWidgets&&e.setup_widgets_desktop()},"desktop"===$.device?e.setup_widget_desktop():e.setup_widget_mobile()}}}).directive("widget",function(){return{restrict:"AE",transclude:!0,replace:!0,template:'<div class="jarviswidget" data-ng-transclude=""></div>'}}).directive("widgetHeader",function(){return{restrict:"AE",transclude:!0,replace:!0,scope:{title:"@",icon:"@"},template:'				<header>					<span class="widget-icon"> <i data-ng-class="icon"></i> </span>					<h2>{{ title }}</h2>					<span data-ng-transclude></span>				</header>'}}).directive("widgetToolbar",function(){return{restrict:"AE",transclude:!0,replace:!0,template:'<div class="widget-toolbar" data-ng-transclude=""></div>'}}).directive("widgetEditbox",function(){return{restrict:"AE",transclude:!0,replace:!0,template:'<div class="jarviswidget-editbox" data-ng-transclude=""></div>'}}).directive("widgetBody",function(){return{restrict:"AE",transclude:!0,replace:!0,template:'<div data-ng-transclude=""></div>'}}).directive("widgetBodyToolbar",function(){return{restrict:"AE",transclude:!0,replace:!0,scope:{"class":"@"},template:'<div class="widget-body-toolbar" data-ng-transclude=""></div>'}}).directive("widgetContent",function(){return{restrict:"AE",transclude:!0,replace:!0,template:'<div class="widget-body" data-ng-transclude=""></div>'}});
angular.module("app.controllers").controller("overviewCtrl",["$scope","$rootScope","$http","$filter","$timeout",function(a,t,e,n,r){a.queryFinanceData=function(){e.get("/dfapi",{params:{api:515,day:a.day}}).success(function(t){a.dateList=t.dateList,a.InList=t.InList,a.OutList=t.OutList,a.InOutList=t.InOutList,a.drawBalance()})},a.queryCarFixList=function(){e.get("/dfapi",{params:{api:211,page:a.page,rows:a.rows,dayStart:a.dayStart,dayEnd:a.dayEnd,search:!0}}).success(function(t){a.carFixList=n("fillArray")(t.rows,a.rows),a.totalItems=t.total})},a.searchAcc=function(){a.page=1,a.queryCarFixList()},a.pagination=function(t){a.page=t,a.queryCarFixList()},a.init=function(){a.page=1,a.rows=3,a.totalItems=0,a.day=7,a.dayStart=(new Date).Format("yyyy-MM-dd"),a.dayEnd=(new Date).Format("yyyy-MM-dd"),a.queryFinanceData(),a.queryCarFixList()},a.drawBalance=function(){FusionCharts.ready(function(){new FusionCharts({type:"mscombidy2d",renderAt:"chart-container",width:"100%",height:"350",dataFormat:"json",dataSource:{chart:{caption:"近7天收支情况",xAxisname:"日 期",pYAxisName:"金 额",numberPrefix:"￥",paletteColors:"#f2c500,#1aaf5d,#0075c2",bgColor:"#ffffff",showBorder:"0",showCanvasBorder:"0",usePlotGradientColor:"0",plotBorderAlpha:"10",legendBorderAlpha:"0",legendBgAlpha:"0",legendShadow:"0",showHoverEffect:"1",valueFontColor:"#4C4F53",rotateValues:"0.5",placeValuesInside:"0",divlineColor:"#999999",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",canvasBgColor:"#ffffff",captionFontSize:"14"},categories:[{category:a.dateList}],dataset:[{seriesname:"支出",data:a.OutList},{seriesname:"收入",data:a.InList},{seriesname:"收支",renderAs:"line",data:a.InOutList}]}}).render()})},a.init()}]);
angular.module("app.controllers").controller("accSearchCtrl",["$scope","$rootScope","$http","$filter","$timeout","$cookies",function(t,c,o,e,a,i){t.queryAccList=function(){o.get("/dfapi",{params:{api:101,page:t.page,rows:t.rows,accName:t.keyword}}).success(function(c){t.accList=e("fillArray")(c.rows,t.rows),t.totalItems=c.total})},t.searchAcc=function(){t.page=1,t.queryAccList()},t.pagination=function(c){t.page=c,t.queryAccList()},t.init=function(){t.page=1,t.rows=8,t.totalItems=0,t.queryAccList()},t.init()}]);
angular.module("app.controllers").controller("accManageCtrl",["$scope","$http","$filter","$modal",function(c,t,e,a){c.clearSelectedItem=function(){c.accActiveItem={},c.currentActiveStatus=!1,c.currentActiveIndex=null},c.queryAccList=function(){c.clearSelectedItem(),t.get("/dfapi",{params:{api:101,page:c.page,rows:c.rows,accName:c.keyword}}).success(function(t){c.accList=e("fillArray")(t.rows,c.rows),c.totalItems=t.total,0===t.rows.length&&1!==c.page&&(c.page=c.page-1,c.queryAccList())})},c.searchAcc=function(){c.page=1,c.queryAccList()},c.toggleActive=function(t){return c.currentActiveIndex===t?(c.currentActiveIndex=null,c.currentActiveStatus=!c.currentActiveStatus,c.accList[t].active=!c.accList[t].active,c.accActiveItem={},null):("number"==typeof c.currentActiveIndex&&(c.accList[c.currentActiveIndex].active=!1),c.accList[t].id?(c.currentActiveStatus=!0,c.currentActiveIndex=t,c.accList[t].active=!0,void(c.accActiveItem=c.accList[t])):(c.currentActiveIndex=null,c.currentActiveStatus=!1,c.accActiveItem={},!1))},c.pagination=function(t){c.page=t,c.queryAccList()},c.open=function(){c.items={type:c.opType,title:c.opTitle,accItem:c.accActiveItem};var t=a.open({backdrop:"static",templateUrl:"accOperation.html",controller:"accOpCtrl",resolve:{items:function(){return c.items}}});t.result.then(function(t){"add"===c.opType&&(c.page=1),c.queryAccList()},function(){console.log("cancel acc operation")})},c.initAddAcc=function(){c.opType="add",c.opTitle="新增配件"},c.addAcc=function(){c.initAddAcc(),c.open()},c.initEditAcc=function(){c.opType="edit",c.opTitle="编辑配件"},c.editAcc=function(){c.initEditAcc(),c.open()},c.dealDelRet=function(){$.smallBox({title:"删除结果",content:c.delMessage+"<p class='text-align-right'><a href='javascript:void(0);' class='btn btn-primary btn-sm'>确定</a></p>",color:c.tipColor,timeout:5e3,icon:"fa fa-bell swing animated"})},c.delAccConfirm=function(){t.post("/dfapi?api=104",{id:c.accActiveItem.id}).success(function(t){c.delMessage=t.Message,"success"===t.Result?c.tipColor="#739E73":c.tipColor="#C46A69",c.dealDelRet(),c.queryAccList()}).error(function(t){c.tipColor="#C46A69",c.delMessage="服务器无响应，请稍后重试！",c.dealDelRet()})},c.delAcc=function(){confirm("确定要删除该条配件信息吗？")&&c.delAccConfirm()},c.init=function(){c.page=1,c.rows=8,c.keyword="",c.totalItems=0,c.queryAccList()},c.init()}]).controller("accOpCtrl",["$scope","$modalInstance","$http","$timeout","items",function(c,t,e,a,n){c.opAccItem=function(n,i){e.post("/dfapi?api="+n,{id:i,accCommonName:c.accItem.accCommonName,accName:c.accItem.accName,accIDNumber:c.accItem.accIDNumber,accType:c.accItem.accType,accLocation:c.accItem.accLocation,accCost:c.accItem.accCost,accPrice:c.accItem.accPrice,accCount:Number(c.accItem.accCount),accRemark:c.accItem.accRemark}).success(function(e){1===e.total?(c.Message="操作成功",a(function(){t.close()},500)):c.Message=e.errorMsg}).error(function(t){c.Message="服务器无响应，请稍后重试！"})},c.submitForm=function(t){return c.dirtyFlag=!0,t?("add"===n.type&&c.opAccItem(102,0),void("edit"===n.type&&c.opAccItem(103,n.accItem.id))):(c.Message="请确认输入格式正确！",null)},c.cancelForm=function(){t.dismiss("cancel")},c.clearInput=function(){c.accItem.accCommonName="",c.accItem.accName="",c.accItem.accIDNumber="",c.accItem.accType="",c.accItem.accLocation="",c.accItem.accCost="",c.accItem.accPrice="",c.accItem.accCount="",c.accItem.accSafeCount="",c.accItem.accCommonCount="",c.accItem.accRemark=""},c.initInput=function(){var t=n.accItem;c.accItem.accCommonName=t.accCommonName,c.accItem.accName=t.accName,c.accItem.accIDNumber=t.accIDNumber,c.accItem.accType=t.accType,c.accItem.accLocation=t.accLocation,c.accItem.accCost=t.accCost,c.accItem.accPrice=t.accPrice,c.accItem.accCount=t.accCount,c.accItem.accSafeCount=t.accSafeCount,c.accItem.accCommonCount=t.accCommonCount,c.accItem.accRemark=t.accRemark},c.init=function(){c.items=n,c.dirtyFlag=!1,c.Message="",c.accItem={},"edit"===n.type?c.initInput():c.clearInput()},c.init()}]);
angular.module("app.controllers").controller("carInfoCtrl",["$scope","$rootScope","$http","$filter","$modal",function(e,t,r,a,c){e.searchItemList=["","","",""],e.searchTypeList=["底盘号","车牌","车主","电话"],e.$watch("searchType",function(t,r){t!==r&&(e.searchType=Number(e.searchType),e.searchTip=e.searchTypeList[e.searchType])}),e.clearSelectedItem=function(){e.carInfoActiveItem={},e.currentActiveStatus=!1,e.currentActiveIndex=null,e.searchItemList=["","","",""],e.searchItemList[e.searchType]=e.keyword},e.queryCarInfoList=function(){e.clearSelectedItem(),r.get("/dfapi",{params:{api:201,page:e.page,rows:e.rows,dayStart:e.dayStart,dayEnd:e.dayEnd,carIDNumber:e.searchItemList[0],carNumber:e.searchItemList[1],carOwner:e.searchItemList[2],carTel:e.searchItemList[3]}}).success(function(t){e.carInfoList=a("fillArray")(t.rows,e.rows),e.totalItems=t.total,0===t.rows.length&&1!==e.page&&(e.page=e.page-1,e.queryCarInfoList())})},e.searchCarInfo=function(){e.page=1,e.queryCarInfoList()},e.keydown=function(t){13===t.keyCode&&e.searchCarInfo()},e.toggleActive=function(t){return e.currentActiveIndex===t?(e.currentActiveIndex=null,e.currentActiveStatus=!e.currentActiveStatus,e.carInfoList[t].active=!e.carInfoList[t].active,e.carInfoActiveItem={},null):("number"==typeof e.currentActiveIndex&&(e.carInfoList[e.currentActiveIndex].active=!1),e.carInfoList[t].id?(e.currentActiveStatus=!0,e.currentActiveIndex=t,e.carInfoList[t].active=!0,void(e.carInfoActiveItem=e.carInfoList[t])):(e.currentActiveIndex=null,e.currentActiveStatus=!1,e.carInfoActiveItem={},!1))},e.pagination=function(t){e.page=t,e.queryCarInfoList()},e.openOpPage=function(){e.items={type:e.opType,title:e.opTitle,carInfoItem:e.carInfoActiveItem};var t=c.open({backdrop:"static",templateUrl:"carInfoOperation.html",controller:"carInfoOpCtrl",resolve:{items:function(){return e.items}}});t.result.then(function(t){"add"===e.opType&&(e.page=1),e.queryCarInfoList()},function(){console.log("cancel carInfo operation")})},e.initAddcarInfo=function(){e.opType="add",e.opTitle="新增车辆信息"},e.addCarInfo=function(){e.initAddcarInfo(),e.openOpPage()},e.initEditcarInfo=function(){e.opType="edit",e.opTitle="编辑车辆信息"},e.editCarInfo=function(){e.initEditcarInfo(),e.openOpPage()},e.dealDelRet=function(){$.smallBox({title:"删除结果",content:e.delMessage+"<p class='text-align-right'><a href='javascript:void(0);' class='btn btn-primary btn-sm'>确定</a></p>",color:e.tipColor,timeout:5e3,icon:"fa fa-bell swing animated"})},e.delCarInfoConfirm=function(){r.post("/dfapi?api=204",{id:e.carInfoActiveItem.id}).success(function(t){e.delMessage=t.Message,"success"===t.Result?e.tipColor="#739E73":e.tipColor="#C46A69",e.dealDelRet(),e.queryCarInfoList()}).error(function(t){e.tipColor="#C46A69",e.delMessage="服务器无响应，请稍后重试！",e.dealDelRet()})},e.delCarInfo=function(){confirm("确定要删除该条车辆信息吗？")&&e.delCarInfoConfirm()},e.init=function(){e.page=1,e.rows=8,e.totalItems=0,e.keyword="",e.searchType=0,e.searchTip=e.searchTypeList[0];var t=new Date,r=t.setDate(t.getDate()-60);e.dayStart=new Date(r).Format("yyyy-MM-dd"),e.dayEnd=(new Date).Format("yyyy-MM-dd"),e.queryCarInfoList()},e.init()}]).controller("carInfoOpCtrl",["$scope","$modalInstance","$http","$timeout","items",function(e,t,r,a,c){e.opcarInfoItem=function(c,n){r.post("/dfapi?api="+c,{id:n,carIDNumber:e.carInfoItem.carIDNumber,carNumber:e.carInfoItem.carNumber,carType:e.carInfoItem.carType,carBuyDate:e.carInfoItem.carBuyDate,carProDate:e.carInfoItem.carProDate,carCard:e.carInfoItem.carCard,carOwner:e.carInfoItem.carOwner,carTel:e.carInfoItem.carTel,carRemark:e.carInfoItem.carRemark}).success(function(r){1===r.total?(e.Message="操作成功",a(function(){t.close()},500)):e.Message=r.errorMsg}).error(function(t){e.Message="服务器无响应，请稍后重试！"})},e.submitForm=function(t){return e.dirtyFlag=!0,t?("add"===c.type&&e.opcarInfoItem(202,0),void("edit"===c.type&&e.opcarInfoItem(203,c.carInfoItem.id))):(e.Message="请确认输入格式正确！",null)},e.cancelForm=function(){t.dismiss("cancel")},e.clearInput=function(){e.carInfoItem.carIDNumber="",e.carInfoItem.carNumber="",e.carInfoItem.carType="",e.carInfoItem.carBuyDate="",e.carInfoItem.carProDate="",e.carInfoItem.carCard="",e.carInfoItem.carOwner="",e.carInfoItem.carTel="",e.carInfoItem.carRemark=""},e.initInput=function(){var t=c.carInfoItem;e.carInfoItem.carIDNumber=t.carIDNumber,e.carInfoItem.carNumber=t.carNumber,e.carInfoItem.carType=t.carType,e.carInfoItem.carBuyDate=t.carBuyDate,e.carInfoItem.carProDate=t.carProDate,e.carInfoItem.carCard=t.carCard,e.carInfoItem.carOwner=t.carOwner,e.carInfoItem.carTel=t.carTel,e.carInfoItem.carRemark=t.carRemark},e.init=function(){e.items=c,e.dirtyFlag=!1,e.Message="",e.carInfoItem={},"edit"===c.type?e.initInput():e.clearInput()},e.init()}]);
angular.module("app.controllers").controller("carFixCtrl",["$scope","$rootScope","$http","$modal","$timeout","$filter","$window","$location",function(c,e,t,a,r,i,n,o){c.searchItemList=["","",""],c.searchTypeList=["车牌","底盘号","车主"],c.$watch("searchType",function(e,t){e!==t&&(c.searchType=Number(c.searchType),c.searchTip=c.searchTypeList[c.searchType])}),c.clearSelectedItem=function(){c.carFixActiveItem={},c.currentActiveStatus=!1,c.currentActiveIndex=null,c.searchItemList=["","",""],c.searchItemList[c.searchType]=c.keyword},c.queryCarFixList=function(){c.clearSelectedItem(),t.get("/dfapi",{params:{api:211,page:c.page,rows:c.rows,dayStart:c.dayStart,dayEnd:c.dayEnd,carIDNumber:c.searchItemList[1],carNumber:c.searchItemList[0],carOwner:c.searchItemList[2],search:!0}}).success(function(e){c.carFixList=i("fillArray")(e.rows,c.rows),c.totalItems=e.total,0===e.rows.length&&1!==c.page&&(c.page=c.page-1,c.queryCarFixList())})},c.searchCarFix=function(){c.page=1,c.queryCarFixList()},c.keydown=function(e){13===e.keyCode&&c.searchCarFix()},c.toggleActive=function(e){return c.currentActiveIndex===e?(c.currentActiveIndex=null,c.currentActiveStatus=!c.currentActiveStatus,c.carFixList[e].active=!c.carFixList[e].active,c.carFixActiveItem={},null):("number"==typeof c.currentActiveIndex&&(c.carFixList[c.currentActiveIndex].active=!1),c.carFixList[e].id?(c.currentActiveStatus=!0,c.currentActiveIndex=e,c.carFixList[e].active=!0,void(c.carFixActiveItem=c.carFixList[e])):(c.currentActiveIndex=null,c.currentActiveStatus=!1,c.carFixActiveItem={},!1))},c.showAccDetail=function(){c.items={sum:c.sum,fixAccList:c.fixAccList};var e=a.open({templateUrl:"accDetail.html",controller:"accDetailCtrl",resolve:{items:function(){return c.items}}});e.result.then(function(e){"add"===c.opType&&(c.page=1),c.queryCarFixList()},function(){console.log("cancel CarFix operation")})},c.checkAccDetail=function(e){c.accPage=1,c.accRows=8,c.carFixID=c.carFixList[e].id,c.getFixAcc(!0)},c.pagination=function(e){c.page=e,c.queryCarFixList()},c.initCarAcc=function(){c.accPage=1,c.accRows=5,c.accTotalItems=0,c.carFixDate=document.getElementById("carFixDate"),c.carBuyDate=document.getElementById("carBuyDate"),c.carProDate=document.getElementById("carProDate")},c.queryAccList=function(){t.get("/dfapi",{params:{api:101,page:1,rows:1e4,searchFlag:!0}}).success(function(e){c.accList=e.rows,r(function(){$("#searchable-select").remove(),$("#accSelect").searchableSelect()},500)})},c.fillCarInfo=function(e){c.carFixInfo.carIDNumber=e.carIDNumber,c.carFixInfo.carNumber=e.carNumber,c.carFixInfo.carType=e.carType,c.carFixInfo.carBuyDate=e.carBuyDate,c.carFixInfo.carProDate=e.carProDate,c.carFixInfo.carOwner=e.carOwner,c.carFixInfo.carTel=e.carTel},c.matchCarInfo=function(){c.searchItemList=["","",""],c.searchItemList[c.searchType]=c.keyword,t.post("/dfapi?api=212",{carIDNumber:c.searchItemList[1],carNumber:c.searchItemList[0],carOwner:c.searchItemList[2]}).success(function(e){c.retMessage=e.Message,"success"===e.Result?e.Data.length>0?(c.tipColor="#739E73",c.fillCarInfo(e.Data[0])):c.tipColor="#3A5BDD":c.tipColor="#C46A69",c.showRetMsg()}).error(function(e){c.tipColor="#C46A69",c.retMessage="服务器无响应，请稍后重试！",c.showRetMsg()})},c.initAddCarFix=function(){c.opType="add",c.opTitle="新增车辆信息",c.sum=0,c.carFixID=-1,c.carFixInfo={},c.matchCarInfo(),c.carFixDate.value=(new Date).Format("yyyy-MM-dd"),c.fixAccList=i("fillArray")([],c.accRows)},c.addCarFix=function(){c.initCarAcc(),c.initAddCarFix()},c.initEditCarFix=function(){c.opType="edit",c.opTitle="编辑车辆信息",c.carFixID=c.carFixActiveItem.id,c.carFixInfo={},c.carFixDate.value=c.carFixActiveItem.carFixDate,c.carFixInfo.carFixODO=c.carFixActiveItem.carFixODO,c.carFixInfo.carFixMan=c.carFixActiveItem.carFixMan,c.carFixInfo.carFixIncome=c.carFixActiveItem.carFixIncome,c.carFixInfo.carFixFavorable=c.carFixActiveItem.carFixFavorable,c.carFixInfo.carFixRemark=c.carFixActiveItem.carFixRemark,c.carFixInfo.carIDNumber=c.carFixActiveItem.carIDNumber,c.carFixInfo.carNumber=c.carFixActiveItem.carNumber,c.carFixInfo.carType=c.carFixActiveItem.carType,c.carBuyDate.value=c.carFixActiveItem.carBuyDate,c.carProDate.value=c.carFixActiveItem.carProDate,c.carFixInfo.carOwner=c.carFixActiveItem.carOwner,c.carFixInfo.carTel=c.carFixActiveItem.carTel,c.carFixInfo.carFixLogging=1===c.carFixActiveItem.carFixLogging},c.editCarFix=function(){c.initCarAcc(),c.initEditCarFix(),c.getFixAcc(!1)},c.submitInfo=function(){"add"===c.opType?(c.urlNo=213,c.carFixActiveItem.id=-1):c.urlNo=214,c.carFixInfo.carFixLogging?c.carFixLogging=1:c.carFixLogging=0,t.post("/dfapi?api="+c.urlNo,{id:c.carFixActiveItem.id,carFixDate:c.carFixDate.value,carFixODO:c.carFixInfo.carFixODO,carFixMan:c.carFixInfo.carFixMan,carFixIncome:c.carFixInfo.carFixIncome,carFixFavorable:c.carFixInfo.carFixFavorable,carFixRemark:c.carFixInfo.carFixRemark,carIDNumber:c.carFixInfo.carIDNumber,carNumber:c.carFixInfo.carNumber,carType:c.carFixInfo.carType,carBuyDate:c.carBuyDate.value,carProDate:c.carProDate.value,carOwner:c.carFixInfo.carOwner,carTel:c.carFixInfo.carTel,carFixLogging:c.carFixLogging}).success(function(e){return c.retMessage=e.Message,"success"!==e.Result?(c.tipColor="#C46A69",c.showRetMsg(),null):void n.location.reload()}).error(function(e){c.tipColor="#C46A69",c.retMessage="服务器无响应，请稍后重试！",c.showRetMsg()})},c.submitInfoForm=function(e){return c.dirtyFlag=!0,e?void c.submitInfo():(c.Message="请确认输入格式正确！",null)},c.showRetMsg=function(){$.smallBox({title:"操作结果",content:c.retMessage+"<p class='text-align-right'><a href='javascript:void(0);' class='btn btn-primary btn-sm'>确定</a></p>",color:c.tipColor,timeout:5e3,icon:"fa fa-bell swing animated"})},c.delCarFixConfirm=function(){t.post("/dfapi?api=215",{id:c.carFixActiveItem.id}).success(function(e){c.retMessage=e.Message,"success"===e.Result?c.tipColor="#739E73":c.tipColor="#C46A69",c.showRetMsg(),c.queryCarFixList()}).error(function(e){c.tipColor="#C46A69",c.retMessage="服务器无响应，请稍后重试！",c.showRetMsg()})},c.delCarFix=function(){confirm("确定要删除该条维修记录吗？")&&c.delCarFixConfirm()},c.printCarFix=function(){window.open("/sum/"+c.carFixActiveItem.id)},c.printReport=function(){window.open("/printReport?dayStart="+c.dayStart+"&dayEnd="+c.dayEnd+"&search="+!0)},c.clearAccSelectedItem=function(){c.accActiveItem={},c.currentAccActiveStatus=!1,c.currentAccActiveIndex=null},c.getFixAcc=function(e){c.clearAccSelectedItem(),t.get("/dfapi",{params:{api:301,carFixID:c.carFixID,page:c.accPage,rows:c.accRows}}).success(function(t){c.sum=t.sum,c.fixAccList=i("fillArray")(t.rows,c.accRows),c.accTotalItems=t.total,0===t.rows.length&&1!==c.accPage&&(c.accPage=c.accPage-1,c.getFixAcc()),e&&(c.fixAccList=t.rows,c.showAccDetail())})},c.accPagination=function(e){c.accPage=e,c.getFixAcc(!1)},c.toggleAccActive=function(e){return c.currentAccActiveIndex===e?(c.currentAccActiveIndex=null,c.currentAccActiveStatus=!c.currentAccActiveStatus,c.fixAccList[e].active=!c.fixAccList[e].active,c.accActiveItem={},null):("number"==typeof c.currentAccActiveIndex&&(c.fixAccList[c.currentAccActiveIndex].active=!1),c.fixAccList[e].carFixID?(c.currentAccActiveStatus=!0,c.currentAccActiveIndex=e,c.fixAccList[e].active=!0,void(c.accActiveItem=c.fixAccList[e])):(c.currentAccActiveIndex=null,c.currentAccActiveStatus=!1,c.accActiveItem={},!1))},c.addFixAcc=function(){t.post("/dfapi?api=302",{carFixID:c.carFixID,carAccIDNumber:localStorage.accKey}).success(function(e){"success"===e.Result?c.getFixAcc(!1):(c.tipColor="#C46A69",c.retMessage=e.errorMsg,c.showRetMsg())}).error(function(e){c.tipColor="#C46A69",c.retMessage="服务器无响应，请稍后重试！",c.showRetMsg()})},c.editFixAcc=function(){c.items={accItem:c.accActiveItem},1===c.items.accItem.carAccGuarantee?c.items.accItem.carAccGuarantee=!0:c.items.accItem.carAccGuarantee=!1;var e=a.open({backdrop:"static",templateUrl:"accEdit.html",controller:"accEditCtrl",resolve:{items:function(){return c.items}}});e.result.then(function(e){c.getFixAcc(!1)},function(){c.getFixAcc(!1),console.log("cancel editFixAcc operation")})},c.delFixAccConfirm=function(){t.post("/dfapi?api=304",{carFixID:c.accActiveItem.carFixID,carAccIDNumber:c.accActiveItem.carAccIDNumber}).success(function(e){c.retMessage=e.Message,"success"===e.Result?c.tipColor="#739E73":c.tipColor="#C46A69",c.showRetMsg(),c.getFixAcc(!1)}).error(function(e){c.tipColor="#C46A69",c.retMessage="服务器无响应，请稍后重试！",c.showRetMsg()})},c.delFixAcc=function(){confirm("确定要删除该条配件信息吗？")&&c.delFixAccConfirm()},c.init=function(){c.page=1,c.rows=8,c.totalItems=0,c.keyword="",c.searchType=0;var e=new Date,t=e.setDate(e.getDate()-3);c.dayStart=new Date(t).Format("yyyy-MM-dd"),c.dayEnd=(new Date).Format("yyyy-MM-dd"),c.searchTip=c.searchTypeList[0],c.queryCarFixList(),c.queryAccList()},c.init()}]).controller("accDetailCtrl",["$scope","$modalInstance","$http","$timeout","items",function(c,e,t,a,r){c.items=r,c.confirmDetail=function(){e.dismiss("cancel")}}]).controller("accEditCtrl",["$scope","$modalInstance","$http","$timeout","items",function(c,e,t,a,r){c.items=r,c.accItem=r.accItem,c.editAccItem=function(){c.accItem.carAccGuarantee?c.carAccGuarantee=1:c.carAccGuarantee=0,t.post("/dfapi?api=303",{oldAccID:r.accItem.carAccIDNumber,carFixID:c.accItem.carFixID,carAccName:c.accItem.carAccName,carAccIDNumber:c.accItem.carAccIDNumber,carAccType:c.accItem.carAccType,carAccPrice:c.accItem.carAccPrice,carAccUsage:c.accItem.carAccUsage,carAccGuarantee:c.carAccGuarantee}).success(function(t){1===t.total?(c.Message="操作成功",a(function(){e.close()},500)):c.Message=t.errorMsg}).error(function(e){c.Message="服务器无响应，请稍后重试！"})},c.submitAccForm=function(e){return c.dirtyFlag=!0,e?void c.editAccItem():(c.Message="请确认输入格式正确！",null)},c.cancelAccForm=function(){e.dismiss("cancel")}}]);
angular.module("app.controllers").controller("financeCtrl",["$scope","$rootScope","$http","$filter","$modal",function(e,n,t,i,a){e.clearSelectedItem=function(){e.financeActiveItem={},e.currentActiveStatus=!1,e.currentActiveIndex=null},e.queryFinanceList=function(){e.clearSelectedItem(),t.get("/dfapi",{params:{api:511,page:e.page,rows:e.rows,dayStart:e.dayStart,dayEnd:e.dayEnd}}).success(function(n){e.In=n.In,e.Out=n.Out,e.InOut=n.InOut,e.financeList=i("fillArray")(n.rows,e.rows),e.totalItems=n.total,0===n.rows.length&&1!==e.page&&(e.page=e.page-1,e.queryFinanceList())})},e.searchFinance=function(){e.page=1,e.queryFinanceList()},e.keydown=function(n){13===n.keyCode&&e.searchFinance()},e.toggleActive=function(n){return e.currentActiveIndex===n?(e.currentActiveIndex=null,e.currentActiveStatus=!e.currentActiveStatus,e.financeList[n].active=!e.financeList[n].active,e.financeActiveItem={},null):("number"==typeof e.currentActiveIndex&&(e.financeList[e.currentActiveIndex].active=!1),e.financeList[n].id?(e.currentActiveStatus=!0,e.currentActiveIndex=n,e.financeList[n].active=!0,void(e.financeActiveItem=e.financeList[n])):(e.currentActiveIndex=null,e.currentActiveStatus=!1,e.financeActiveItem={},!1))},e.pagination=function(n){e.page=n,e.queryFinanceList()},e.forbiddenEdit=function(){e.tipColor="#C2820E",e.delMessage="这条数据是维修记录，请在车辆维修页面中进行修改！",e.showRetTips()},e.openOpPage=function(){e.items={type:e.opType,title:e.opTitle,financeItem:e.financeActiveItem};var n=a.open({backdrop:"static",templateUrl:"financeOperation.html",controller:"financeOpCtrl",resolve:{items:function(){return e.items}}});n.result.then(function(n){"add"===e.opType&&(e.page=1),e.queryFinanceList()},function(){console.log("cancel finance operation")})},e.initAddfinance=function(){e.opType="add",e.opTitle="新增财务记录"},e.addFinance=function(){e.initAddfinance(),e.openOpPage()},e.initEditfinance=function(){e.opType="edit",e.opTitle="编辑车辆信息"},e.editFinance=function(){e.initEditfinance(),0===e.financeActiveItem.id?e.forbiddenEdit():e.openOpPage()},e.showRetTips=function(){$.smallBox({title:"操作结果",content:e.delMessage+"<p class='text-align-right'><a href='javascript:void(0);' class='btn btn-primary btn-sm'>确定</a></p>",color:e.tipColor,timeout:5e3,icon:"fa fa-bell swing animated"})},e.delFinanceConfirm=function(){t.post("/dfapi?api=514",{id:e.financeActiveItem.id}).success(function(n){e.delMessage=n.Message,"success"===n.Result?e.tipColor="#739E73":e.tipColor="#C46A69",e.showRetTips(),e.queryFinanceList()}).error(function(n){e.tipColor="#C46A69",e.delMessage="服务器无响应，请稍后重试！",e.showRetTips()})},e.delFinance=function(){return 0===e.financeActiveItem.id?(e.forbiddenEdit(),null):void(confirm("确定要删除该条收支信息吗？")&&e.delFinanceConfirm())},e.printFinance=function(){window.open("/printBalance?dayStart="+e.dayStart+"&dayEnd="+e.dayEnd)},e.init=function(){e.page=1,e.rows=6,e.totalItems=0,e.dayStart=(new Date).Format("yyyy-MM-dd"),e.dayEnd=(new Date).Format("yyyy-MM-dd"),e.queryFinanceList()},e.init()}]).controller("financeOpCtrl",["$scope","$modalInstance","$http","$timeout","items",function(e,n,t,i,a){e.opfinanceItem=function(a,c){t.post("/dfapi?api="+a,{id:c,balanceDate:e.financeItem.balanceDate,balanceInOut:Number(e.financeItem.balanceInOut),balanceAmount:e.financeItem.balanceAmount,balanceRemark:e.financeItem.balanceRemark}).success(function(t){1===t.total?(e.Message="操作成功",i(function(){n.close()},500)):e.Message=t.errorMsg}).error(function(n){e.Message="服务器无响应，请稍后重试！"})},e.submitForm=function(n){return e.dirtyFlag=!0,n?("add"===a.type&&e.opfinanceItem(512,0),void("edit"===a.type&&e.opfinanceItem(513,a.financeItem.id))):(e.Message="请确认输入格式正确！",null)},e.cancelForm=function(){n.dismiss("cancel")},e.clearInput=function(){e.financeItem={},e.financeItem.balanceInOut=1,e.financeItem.balanceDate=(new Date).Format("yyyy-MM-dd")},e.initInput=function(){var n=a.financeItem;e.financeItem={},e.financeItem.balanceDate=n.balanceDate,e.financeItem.balanceInOut=n.balanceInOut,e.financeItem.balanceAmount=n.balanceAmount,e.financeItem.balanceRemark=n.balanceRemark},e.init=function(){e.items=a,e.dirtyFlag=!1,e.Message="","edit"===a.type?e.initInput():e.clearInput()},e.init()}]);
angular.module("app.controllers").controller("accUsageCtrl",["$scope","$http","$filter","$modal",function(a,t,e,c){a.queryAccUsageList=function(){t.get("/dfapi",{params:{api:501,page:a.page,rows:a.rows,dayStart:a.dayStart,dayEnd:a.dayEnd}}).success(function(t){a.accUsageList=e("fillArray")(t.rows,a.rows),a.totalItems=t.total,0===t.rows.length&&1!==a.page&&(a.page=a.page-1,a.queryAccUsageList())})},a.searchAccUsage=function(t){return t?(a.page=1,void a.queryAccUsageList()):null},a.keydown=function(t){13===t.keyCode&&a.searchAccUsage()},a.pagination=function(t){a.page=t,a.queryAccUsageList()},a.expAccUsage=function(){window.open("/export/accfile?dayStart="+a.dayStart+"&dayEnd="+a.dayEnd)},a.init=function(){a.page=1,a.rows=8,a.totalItems=0;var t=new Date,e=t.setDate(t.getDate()-15);a.dayStart=new Date(e).Format("yyyy-MM-dd"),a.dayEnd=(new Date).Format("yyyy-MM-dd"),a.queryAccUsageList()},a.init()}]);
angular.module("app.controllers").controller("portCtrl",["$scope","$rootScope","$http","$filter","$timeout",function(o,t,a,e,c){o.outTemplate=function(){window.open("/media/data/"+o.templateType+".xls")},o.outData=function(){"acc"===o.dataType?window.open("/out/accfile"):"carinfo"===o.dataType?window.open("/out/carfile"):"carfix"===o.dataType?window.open("/out/carfixfile?search=1"):alert("导出数据出错")},o.complyImport=function(o){$.ajaxFileUpload({url:o,secureuri:!1,fileElementId:"newAcc",dataType:"HTML",success:function(o){},error:function(o,t,a){}})},o.importData=function(){"acc"===o.importType?o.complyImport("/download/newacc"):"carinfo"===o.importType?o.complyImport("/download/newcar"):"carfix"===o.importType?o.complyImport("/download/carfix"):alert("导入数据出错")},o.init=function(){o.templateType="acc",o.dataType="acc",o.importType="acc"},o.init()}]);
angular.module("app.controllers").controller("dashboardCtrl",["$scope","$rootScope","$http","$filter","$timeout",function(t,e,a,i,n){t.queryCarCount=function(){a.get("/dfapi",{params:{api:701,day:t.countDay}}).success(function(e){t.carCountList=e.Data,t.drawCarCount()})},t.queryBenifitRate=function(){a.get("/dfapi",{params:{api:702}}).success(function(e){t.cost=e.Data.totalCost,t.benifit=e.Data.totalBenifit,t.drawBenifitRate()})},t.queryBenifit=function(){a.get("/dfapi",{params:{api:703,day:t.benifitDay}}).success(function(e){t.benifitList=e.benifitList,t.drawBenifit()})},t.init=function(){t.page=1,t.rows=3,t.totalItems=0,t.countDay=7,t.benifitDay=10,t.queryCarCount(),t.queryBenifitRate(),t.queryBenifit()},t.drawCarCount=function(){FusionCharts.ready(function(){new FusionCharts({type:"column2d",renderAt:"car-count-chart",width:"100%",height:"100%",dataFormat:"json",dataSource:{chart:{caption:"近7天车辆进站数",xAxisname:"日 期",yAxisName:"单位:辆",paletteColors:"#0075c2",bgColor:"#ffffff",borderAlpha:"20",canvasBorderAlpha:"0",usePlotGradientColor:"0",plotBorderAlpha:"10",placevaluesInside:"1",rotatevalues:"0",valueFontColor:"#ffffff",showXAxisLine:"1",xAxisLineColor:"#999999",divlineColor:"#999999",divLineIsDashed:"1",showAlternateHGridColor:"0"},data:t.carCountList}}).render()})},t.drawBenifitRate=function(){FusionCharts.ready(function(){new FusionCharts({type:"pie2d",renderAt:"benifit-rate-chart",width:"100%",height:"100%",dataFormat:"json",dataSource:{chart:{caption:"成本、利润占比图",numberPrefix:"￥",showPercentValues:"1",showPercentInTooltip:"0",decimals:"1",theme:"fint"},data:[{label:"成本",value:t.cost},{label:"利润",value:t.benifit}]}}).render()})},t.drawBenifit=function(){FusionCharts.ready(function(){new FusionCharts({type:"line",renderAt:"benifit-chart",width:"100%",height:"100%",dataFormat:"json",dataSource:{chart:{caption:"近10天利润情况",xAxisName:"日 期",yAxisName:"单位:元",numberPrefix:"￥",theme:"fint",usePlotGradientColor:"1",plotGradientColor:"#f2c500",plotFillRatio:"1:100",plotFillAngle:"270"},data:t.benifitList}}).render()})},t.init()}]);
angular.module("app.controllers").controller("userManageCtrl",["$scope","$rootScope","$http","$filter","$modal",function(e,t,s,r,i){e.clearSelectedItem=function(){e.userActiveItem={},e.currentActiveStatus=!1,e.currentActiveIndex=null},e.queryUserList=function(){e.clearSelectedItem(),s.get("/dfapi",{params:{api:"003",page:e.page,rows:e.rows}}).success(function(t){e.userList=r("fillArray")(t.rows,e.rows),e.totalItems=t.total,0===t.rows.length&&1!==e.page&&(e.page=e.page-1,e.queryUserList())})},e.searchUser=function(){e.page=1,e.queryUserList()},e.toggleActive=function(t){return e.currentActiveIndex===t?(e.currentActiveIndex=null,e.currentActiveStatus=!e.currentActiveStatus,e.userList[t].active=!e.userList[t].active,e.userActiveItem={},null):("number"==typeof e.currentActiveIndex&&(e.userList[e.currentActiveIndex].active=!1),e.userList[t].id?(e.currentActiveStatus=!0,e.currentActiveIndex=t,e.userList[t].active=!0,void(e.userActiveItem=e.userList[t])):(e.currentActiveIndex=null,e.currentActiveStatus=!1,e.userActiveItem={},!1))},e.pagination=function(t){e.page=t,e.queryUserList()},e.open=function(){e.items={type:e.opType,title:e.opTitle,userItem:e.userActiveItem};var t=i.open({backdrop:"static",templateUrl:"userOperation.html",controller:"userOpCtrl",resolve:{items:function(){return e.items}}});t.result.then(function(t){"add"===e.opType&&(e.page=1),e.queryUserList()},function(){console.log("cancel user operation")})},e.initAddUser=function(){e.opType="add",e.opTitle="新增用户"},e.addUser=function(){e.initAddUser(),e.open()},e.initEditUser=function(){e.opType="edit",e.opTitle="编辑用户"},e.editUser=function(){e.initEditUser(),e.open()},e.dealDelRet=function(){$.smallBox({title:"删除结果",content:e.delMessage+"<p class='text-align-right'><a href='javascript:void(0);' class='btn btn-primary btn-sm'>确定</a></p>",color:e.tipColor,timeout:5e3,icon:"fa fa-bell swing animated"})},e.delUserConfirm=function(){s.post("/dfapi?api=006",{id:e.userActiveItem.id}).success(function(t){e.delMessage=t.Message,"success"===t.Result?e.tipColor="#739E73":e.tipColor="#C46A69",e.dealDelRet(),e.queryUserList()}).error(function(t){e.tipColor="#C46A69",e.delMessage="服务器无响应，请稍后重试！",e.dealDelRet()})},e.delUser=function(t){return 1!==Number(e.userActiveItem.role)||t?void(confirm("确定要删除该条用户信息吗？")&&e.delUserConfirm()):(alert("禁止删除管理员"),null)},e.switchUser=function(){s.post("/dfapi?api=007",{id:e.userActiveItem.id,disable:1-Number(e.userActiveItem.disable)}).success(function(t){e.delMessage=t.Message,"success"===t.Result?e.tipColor="#739E73":e.tipColor="#C46A69",e.dealDelRet(),e.queryUserList()}).error(function(t){e.tipColor="#C46A69",e.delMessage="服务器无响应，请稍后重试！",e.dealDelRet()})},e.init=function(){e.page=1,e.rows=8,e.keyword="",e.totalItems=0,e.queryUserList()},e.init()}]).controller("userOpCtrl",["$scope","$modalInstance","$http","$timeout","items",function(e,t,s,r,i){e.opUserItem=function(i,n){s.post("/dfapi?api="+i,{id:n,userName:e.userItem.userName,role:e.userItem.role,telphone:e.userItem.telphone,position:e.userItem.position,description:e.userItem.description,password:e.userItem.password}).success(function(s){"success"===s.Result?(e.Message="操作成功",r(function(){t.close()},500)):e.Message=s.Message}).error(function(t){e.Message="服务器无响应，请稍后重试！"})},e.submitForm=function(t){return e.dirtyFlag=!0,t?("add"===i.type&&e.opUserItem("004",0),void("edit"===i.type&&e.opUserItem("005",i.userItem.id))):(e.Message="请确认输入格式正确！",null)},e.cancelForm=function(){t.dismiss("cancel")},e.clearInput=function(){e.userItem.userName="",e.userItem.role=2,e.userItem.password="",e.userItem.telphone="",e.userItem.position="",e.userItem.description=""},e.initInput=function(){var t=i.userItem;e.userItem.userName=t.userName,e.userItem.password="123",e.userItem.role=t.role,e.userItem.telphone=t.telphone,e.userItem.position=t.position,e.userItem.description=t.description},e.init=function(){e.items=i,e.dirtyFlag=!1,e.Message="",e.userItem={},"edit"===i.type?e.initInput():e.clearInput()},e.init()}]);
angular.module("plunker",[]).factory("plunkGenerator",function(n){return function(t,e,r,o,a){var i=angular.element('<form style="display: none;" method="post" action="http://plnkr.co/edit/?p=preview" target="_blank"></form>'),l=function(n,t){var e=angular.element('<input type="hidden" name="'+n+'">');e.attr("value",t),i.append(e)},p=function(n,r){return'<!doctype html>\n<html ng-app="plunker">\n  <head>\n    <script src="//ajax.googleapis.com/ajax/libs/angularjs/'+t+'/angular.js"></script>\n    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-'+r+'.js"></script>\n    <script src="example.js"></script>\n    <link href="//netdna.bootstrapcdn.com/bootstrap/'+e+'/css/bootstrap.min.css" rel="stylesheet">\n  </head>\n  <body>\n\n'+n+"\n  </body>\n</html>\n"},u=function(n){return"angular.module('plunker', ['ui.bootstrap']);\n"+n};l("description","http://angular-ui.github.io/bootstrap/"),l("files[index.html]",p(a.markup,r)),l("files[example.js]",u(a.javascript)),n.find("body").append(i),i[0].submit(),i.remove()}}).controller("PlunkerCtrl",function(n,t){n.content={},n.edit=function(e,r,o,a){t(e,r,o,a,n.content)}}).directive("plunkerContent",function(){return{link:function(n,t,e){n.content[e.plunkerContent]=t.text().trim()}}});
